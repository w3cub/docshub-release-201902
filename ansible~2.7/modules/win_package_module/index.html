
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Win_package - Ansible 2.7 - W3cubDocs</title>
  
  <meta name="description" content=" New in version 1.7. ">
  <meta name="keywords" content="win, package, -, installs, uninstalls, installable, ansible, ansible~2.7">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/ansible~2.7/modules/win_package_module/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-6ca5be81b81eb73e654078d9aaa623884afe18900617ed9a60729a4905026f77.css">
  <script type="text/javascript" src="/assets/application-2fa35d54abf92f248ac868261a14d3f99b325c34fcc70df314719245e248d73c.js"></script>
  <script src="/json/ansible~2.7.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-2572770204602497",
            enable_page_level_ads: true
        });
  </script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/ansible~2.7/" class="_nav-link" title="" style="margin-left:0;">Ansible 2.7</a></span>
  
  <nav class="_nav">
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _sphinx">
				
				
<h1 id="win-package-module">win_package - Installs/uninstalls an installable package</h1> <div class="versionadded" id="win-package-installs-uninstalls-an-installable-package"> <p><span class="versionmodified">New in version 1.7.</span></p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#parameters" id="id2">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id3">Notes</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id5">Return Values</a></li> <li><a class="reference internal" href="#status" id="id6">Status</a></li> <li>
<a class="reference internal" href="#maintenance" id="id7">Maintenance</a><ul> <li><a class="reference internal" href="#support" id="id8">Support</a></li> <li><a class="reference internal" href="#author" id="id9">Author</a></li> </ul> </li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Installs or uninstalls a package in either an MSI or EXE format.</li> <li>These packages can be sources from the local file system, network file share or a url.</li> <li>Please read the notes section around some caveats with this module.</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="1">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="1"> <b>arguments</b> </td> <td> </td> <td> <div>Any arguments the installer needs to either install or uninstall the package.</div> <div>If the package is an MSI do not supply the <code>/qn</code>, <code>/log</code> or <code>/norestart</code> arguments.</div> <div>As of Ansible 2.5, this parameter can be a list of arguments and the module will escape the arguments as necessary, it is recommended to use a string when dealing with MSI packages due to the unique escaping issues with msiexec.</div> </td> </tr> <tr> <td colspan="1"> <b>creates_path</b> <br><div style="font-size: small; color: red">path</div> <br><div style="font-size: small; color: darkgreen">(added in 2.4)</div> </td> <td> </td> <td> <div>Will check the existance of the path specified and use the result to determine whether the package is already installed.</div> <div>You can use this in conjunction with <code>product_id</code> and other <code>creates_*</code>.</div> </td> </tr> <tr> <td colspan="1"> <b>creates_service</b> <br><div style="font-size: small; color: darkgreen">(added in 2.4)</div> </td> <td> </td> <td> <div>Will check the existing of the service specified and use the result to determine whether the package is already installed.</div> <div>You can use this in conjunction with <code>product_id</code> and other <code>creates_*</code>.</div> </td> </tr> <tr> <td colspan="1"> <b>creates_version</b> <br><div style="font-size: small; color: darkgreen">(added in 2.4)</div> </td> <td> </td> <td> <div>Will check the file version property of the file at <code>creates_path</code> and use the result to determine whether the package is already installed.</div> <div>
<code>creates_path</code> MUST be set and is a file.</div> <div>You can use this in conjunction with <code>product_id</code> and other <code>creates_*</code>.</div> </td> </tr> <tr> <td colspan="1"> <b>expected_return_code</b> <br><div style="font-size: small; color: red">list</div> </td> <td> <b>Default:</b><br><div style="color: blue">[0, 3010]</div> </td> <td> <div>One or more return codes from the package installation that indicates success.</div> <div>Before Ansible 2.4 this was just 0 but since 2.4 this is both <code>0</code> and <code>3010</code>.</div> <div>A return code of <code>3010</code> usually means that a reboot is required, the <code>reboot_required</code> return value is set if the return code is <code>3010</code>.</div> </td> </tr> <tr> <td colspan="1"> <b>password</b> </td> <td> </td> <td> <div>The password for <code>user_name</code>, must be set when <code>user_name</code> is.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: user_password</div> </td> </tr> <tr> <td colspan="1"> <b>path</b> </td> <td> </td> <td> <div>Location of the package to be installed or uninstalled.</div> <div>This package can either be on the local file system, network share or a url.</div> <div>If the path is on a network share and the current WinRM transport doesn't support credential delegation, then <code>user_name</code> and <code>user_password</code> must be set to access the file.</div> <div>There are cases where this file will be copied locally to the server so it can access it, see the notes for more info.</div> <div>If <code>state=present</code> then this value MUST be set.</div> <div>If <code>state=absent</code> then this value does not need to be set if <code>product_id</code> is.</div> </td> </tr> <tr> <td colspan="1"> <b>product_id</b> </td> <td> </td> <td> <div>The product id of the installed packaged.</div> <div>This is used for checking whether the product is already installed and getting the uninstall information if <code>state=absent</code>.</div> <div>You can find product ids for installed programs in the Windows registry editor either at <code>HKLM:Software\Microsoft\Windows\CurrentVersion\Uninstall</code> or for 32 bit programs at <code>HKLM:Software\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall</code>.</div> <div>This SHOULD be set when the package is not an MSI, or the path is a url or a network share and credential delegation is not being used. The <code>creates_*</code> options can be used instead but is not recommended.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: productid</div> </td> </tr> <tr> <td colspan="1"> <b>state</b> </td> <td> <b>Default:</b><br><div style="color: blue">present</div> </td> <td> <div>Whether to install or uninstall the package.</div> <div>The module uses <code>product_id</code> and whether it exists at the registry path to see whether it needs to install or uninstall the package.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: ensure</div> </td> </tr> <tr> <td colspan="1"> <b>username</b> </td> <td> </td> <td> <div>Username of an account with access to the package if it is located on a file share.</div> <div>This is only needed if the WinRM transport is over an auth method that does not support credential delegation like Basic or NTLM.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: user_name</div> </td> </tr> <tr> <td colspan="1"> <b>validate_certs</b> <br><div style="font-size: small; color: red">bool</div> <br><div style="font-size: small; color: darkgreen">(added in 2.4)</div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div style="color: blue">
<b>yes</b> ←</div></li> </ul> </td> <td> <div>If <code>no</code>, SSL certificates will not be validated. This should only be used on personally controlled sites using self-signed certificates.</div> <div>Before Ansible 2.4 this defaulted to <code>no</code>.</div> </td> </tr> </table> <br>  <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="first admonition-title">Note</p> <ul class="last simple"> <li>For non Windows targets, use the <a class="reference internal" href="../package_module/#package-module"><span class="std std-ref">package</span></a> module instead.</li> <li>When <code>state=absent</code> and the product is an exe, the path may be different from what was used to install the package originally. If path is not set then the path used will be what is set under <code>UninstallString</code> in the registry for that product_id.</li> <li>Not all product ids are in a GUID form, some programs incorrectly use a different structure but this module should support any format.</li> <li>By default all msi installs and uninstalls will be run with the options <code>/log, /qn, /norestart</code>.</li> <li>It is recommended you download the package first from the URL using the <a class="reference internal" href="../win_get_url_module/#win-get-url-module"><span class="std std-ref">win_get_url</span></a> module as it opens up more flexibility with what must be set when calling <code>win_package</code>.</li> <li>Packages will be temporarily downloaded or copied locally when path is a network location and credential delegation is not set, or path is a URL and the file is not an MSI.</li> <li>All the installation checks under <code>product_id</code> and <code>creates_*</code> add together, if one fails then the program is considered to be absent.</li> </ul> </div>   <h2 id="examples">Examples</h2> <pre data-language="yaml">- name: Install the Visual C thingy
  win_package:
    path: http://download.microsoft.com/download/1/6/B/16B06F60-3B20-4FF2-B699-5E9B7962F9AE/VSU_4/vcredist_x64.exe
    product_id: '{CF2BEA3C-26EA-32F8-AA9B-331F7E34BA97}'
    arguments: /install /passive /norestart

- name: Install Visual C thingy with list of arguments instead of a string
  win_package:
    path: http://download.microsoft.com/download/1/6/B/16B06F60-3B20-4FF2-B699-5E9B7962F9AE/VSU_4/vcredist_x64.exe
    product_id: '{CF2BEA3C-26EA-32F8-AA9B-331F7E34BA97}'
    arguments:
    - /install
    - /passive
    - /norestart

- name: Install Remote Desktop Connection Manager from msi
  win_package:
    path: https://download.microsoft.com/download/A/F/0/AF0071F3-B198-4A35-AA90-C68D103BDCCF/rdcman.msi
    product_id: '{0240359E-6A4C-4884-9E94-B397A02D893C}'
    state: present

- name: Uninstall Remote Desktop Connection Manager
  win_package:
    product_id: '{0240359E-6A4C-4884-9E94-B397A02D893C}'
    state: absent

- name: Install Remote Desktop Connection Manager locally omitting the product_id
  win_package:
    path: C:\temp\rdcman.msi
    state: present

- name: Uninstall Remote Desktop Connection Manager from local MSI omitting the product_id
  win_package:
    path: C:\temp\rdcman.msi
    state: absent

# 7-Zip exe doesn't use a guid for the Product ID
- name: Install 7zip from a network share specifying the credentials
  win_package:
    path: \\domain\programs\7z.exe
    product_id: 7-Zip
    arguments: /S
    state: present
    user_name: DOMAIN\User
    user_password: Password

- name: Install 7zip and use a file version for the installation check
  win_package:
    path: C:\temp\7z.exe
    creates_path: C:\Program Files\7-Zip\7z.exe
    creates_version: 16.04
    state: present

- name: Uninstall 7zip from the exe
  win_package:
    path: C:\Program Files\7-Zip\Uninstall.exe
    product_id: 7-Zip
    arguments: /S
    state: absent

- name: Uninstall 7zip without specifying the path
  win_package:
    product_id: 7-Zip
    arguments: /S
    state: absent

- name: Install application and override expected return codes
  win_package:
    path: https://download.microsoft.com/download/1/6/7/167F0D79-9317-48AE-AEDB-17120579F8E2/NDP451-KB2858728-x86-x64-AllOS-ENU.exe
    product_id: '{7DEBE4EB-6B40-3766-BB35-5CBBC385DA37}'
    arguments: '/q /norestart'
    state: present
    expected_return_code: [0, 666, 3010]
</pre>   <h2 id="return-values">Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../reference_appendices/common_return_values/#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="documentation-table"> <tr> <th colspan="1">Key</th> <th>Returned</th> <th width="100%">Description</th> </tr> <tr> <td colspan="1"> <b>exit_code</b> <br><div style="font-size: small; color: red">int</div> </td> <td>change occured</td> <td> <div>See rc, this will be removed in favour of rc in Ansible 2.6.</div> <br> </td> </tr> <tr> <td colspan="1"> <b>log</b> <br><div style="font-size: small; color: red">str</div> </td> <td>change occured and package is an MSI</td> <td> <div>The contents of the MSI log.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">Installation completed successfully</div> </td> </tr> <tr> <td colspan="1"> <b>rc</b> <br><div style="font-size: small; color: red">int</div> </td> <td>change occured</td> <td> <div>The return code of the package process.</div> <br> </td> </tr> <tr> <td colspan="1"> <b>reboot_required</b> <br><div style="font-size: small; color: red">bool</div> </td> <td>always</td> <td> <div>Whether a reboot is required to finalise package. This is set to true if the executable return code is 3010.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">True</div> </td> </tr> <tr> <td colspan="1"> <b>restart_required</b> <br><div style="font-size: small; color: red">bool</div> </td> <td>always</td> <td> <div>See reboot_required, this will be removed in favour of reboot_required in Ansible 2.6</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">True</div> </td> </tr> <tr> <td colspan="1"> <b>stderr</b> <br><div style="font-size: small; color: red">str</div> </td> <td>failure during install or uninstall</td> <td> <div>The stderr stream of the package process.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">Failed to install program</div> </td> </tr> <tr> <td colspan="1"> <b>stdout</b> <br><div style="font-size: small; color: red">str</div> </td> <td>failure during install or uninstall</td> <td> <div>The stdout stream of the package process.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">Installing program</div> </td> </tr> </table> <br><br>  <h2 id="status">Status</h2> <p>This module is flagged as <strong>preview</strong> which means that it is not guaranteed to have a backwards compatible interface.</p>   <h2 id="maintenance">Maintenance</h2> <p>This module is flagged as <strong>core</strong> which means that it is maintained by the Ansible Core Team. See <a class="reference internal" href="../../user_guide/modules_support/#modules-support"><span class="std std-ref">Module Maintenance &amp; Support</span></a> for more info.</p> <p>For a list of other modules that are also maintained by the Ansible Core Team, see <a class="reference internal" href="../core_maintained/#core-supported"><span class="std std-ref">here</span></a>.</p>  <h3 id="support">Support</h3> <p>For more information about Red Hat’s support of this module, please refer to this <a class="reference external" href="https://access.redhat.com/articles/rhel-top-support-policies/" target="_blank">Knowledge Base article</a></p>   <h3 id="author">Author</h3> <ul class="simple"> <li>Trond Hindenes (@trondhindenes)</li> <li>Jordan Borean (@jborean93)</li> </ul> <div class="admonition hint"> <p class="first admonition-title">Hint</p> <p class="last">If you notice any issues in this documentation you can <a class="reference external" href="https://github.com/ansible/ansible/edit/devel/lib/ansible/modules/windows/win_package.py?description=%3C!---%20Your%20description%20here%20--%3E%0A%0A%2Blabel:%20docsite_pr" target="_blank">edit this document</a> to improve it.</p> </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2012–2018 Michael DeHaan<br>© 2018 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/2.7/modules/win_package_module.html" class="_attribution-link" target="_blank">https://docs.ansible.com/ansible/2.7/modules/win_package_module.html</a>
  </p>
</div>

				<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
</amp-auto-ads>
			</div>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
